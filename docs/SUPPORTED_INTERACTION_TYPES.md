# Supported Interaction Types in Backend

This document lists all interaction types that can be logged in the backend system.

## Core Interaction Types

These are the primary interaction types supported by the backend:

### 1. **view**
- **Description**: User views/browses a product
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Used in**: ML model training (base weight)
- **Example**: User opens a product page

### 2. **click**
- **Description**: User clicks on a product
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Used in**: ML model training (1.2x weight multiplier)
- **Example**: User clicks on a product card

### 3. **add_to_cart**
- **Description**: User adds items to cart
- **event_value**: `quantity` (1, 2, 3, etc.)
- **Required fields**: `product_id`
- **Used in**: 
  - ML model training (1.5x weight multiplier)
  - Cart synchronization (updates `user_cart` table)
- **Example**: User adds 2 items to cart → `event_value = 2`

### 4. **remove_from_cart**
- **Description**: User removes items from cart
- **event_value**: `quantity` (1, 2, etc.) or `0` (remove all)
- **Required fields**: `product_id`
- **Used in**: Cart synchronization (decreases quantity in `user_cart` table)
- **Example**: User removes 1 item → `event_value = 1`

### 5. **update_cart_quantity**
- **Description**: User updates cart quantity directly
- **event_value**: `new_quantity` (0, 1, 2, etc.)
- **Required fields**: `product_id`
- **Used in**: Cart synchronization (sets quantity in `user_cart` table)
- **Example**: User changes quantity to 3 → `event_value = 3`

### 6. **purchase**
- **Description**: User completes a purchase
- **event_value**: `1` (always - represents one purchase transaction)
- **Required fields**: `product_id`
- **Used in**: 
  - ML model training (2.0x weight multiplier - highest)
  - Purchase history (`purchase_history` table)
- **Note**: Do NOT use product price as event_value
- **Example**: User purchases product → `event_value = 1`

### 7. **wishlist**
- **Description**: User adds/removes from wishlist
- **event_value**: `1` (add) or `0` (remove)
- **Required fields**: `product_id`
- **Used in**: 
  - ML model training (1.3x weight multiplier)
  - Wishlist synchronization (`user_wishlist` table)
- **Example**: 
  - Add to wishlist → `event_value = 1`
  - Remove from wishlist → `event_value = 0`

### 8. **review**
- **Description**: User submits a product review/rating
- **event_value**: `1-5` (star rating)
- **Required fields**: `product_id`
- **Used in**: ML model training (1.6x weight multiplier)
- **Example**: User gives 5-star rating → `event_value = 5`

### 9. **search**
- **Description**: User performs a search query
- **event_value**: `1` (always)
- **Optional fields**: `product_id` (if search leads to product view)
- **Additional data**: `search_query` (the search term)
- **Used in**: Search analytics
- **Example**: User searches for "laptop" → `event_type = "search"`

## Session-Specific Interaction Types

These are generated by the session interaction tracker:

### 10. **page_view**
- **Description**: User views a page
- **event_value**: `1` (always)
- **Optional fields**: `product_id`
- **Additional data**: `page_path`, `referrer`
- **Used in**: Session tracking and analytics

### 11. **product_view**
- **Description**: User views a product (similar to `view`)
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `product_name`
- **Used in**: Session tracking

### 12. **cart_add**
- **Description**: Cart action - add item (similar to `add_to_cart`)
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `quantity`, `action`
- **Used in**: Session tracking

### 13. **cart_remove**
- **Description**: Cart action - remove item (similar to `remove_from_cart`)
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `quantity`, `action`
- **Used in**: Session tracking

### 14. **cart_update**
- **Description**: Cart action - update quantity
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `quantity`, `action`
- **Used in**: Session tracking

### 15. **wishlist_add**
- **Description**: Wishlist action - add item (similar to `wishlist` with value 1)
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `action`
- **Used in**: Session tracking

### 16. **wishlist_remove**
- **Description**: Wishlist action - remove item (similar to `wishlist` with value 0)
- **event_value**: `1` (always)
- **Required fields**: `product_id`
- **Additional data**: `action`
- **Used in**: Session tracking

## Authentication Interaction Types

### 17. **login**
- **Description**: User logs in
- **event_value**: `1` (always)
- **No product_id required**
- **Used in**: Authentication tracking

### 18. **logout**
- **Description**: User logs out
- **event_value**: `1` (always)
- **No product_id required**
- **Used in**: Authentication tracking

## Summary Table

| # | Event Type | event_value | Product ID | Syncs to State Table | ML Weight |
|---|------------|-------------|------------|---------------------|-----------|
| 1 | `view` | `1` | Required | No | 1.0x |
| 2 | `click` | `1` | Required | No | 1.2x |
| 3 | `add_to_cart` | `quantity` | Required | `user_cart` | 1.5x |
| 4 | `remove_from_cart` | `quantity` | Required | `user_cart` | - |
| 5 | `update_cart_quantity` | `new_quantity` | Required | `user_cart` | - |
| 6 | `purchase` | `1` | Required | `purchase_history` | 2.0x |
| 7 | `wishlist` | `1` or `0` | Required | `user_wishlist` | 1.3x |
| 8 | `review` | `1-5` | Required | No | 1.6x |
| 9 | `search` | `1` | Optional | No | 1.0x |
| 10 | `page_view` | `1` | Optional | No | - |
| 11 | `product_view` | `1` | Required | No | - |
| 12 | `cart_add` | `1` | Required | No | - |
| 13 | `cart_remove` | `1` | Required | No | - |
| 14 | `cart_update` | `1` | Required | No | - |
| 15 | `wishlist_add` | `1` | Required | No | - |
| 16 | `wishlist_remove` | `1` | Required | No | - |
| 17 | `login` | `1` | No | No | - |
| 18 | `logout` | `1` | No | No | - |

## Notes

1. **Core vs Session Types**: 
   - Core types (`view`, `click`, `add_to_cart`, etc.) are used for ML training and state synchronization
   - Session types (`page_view`, `cart_add`, etc.) are used for detailed session tracking

2. **State Synchronization**: Only these types sync to user state tables:
   - `add_to_cart`, `remove_from_cart`, `update_cart_quantity` → `user_cart`
   - `purchase` → `purchase_history`
   - `wishlist` → `user_wishlist`

3. **ML Training**: These types are weighted in ML models:
   - `purchase`: 2.0x (highest - conversion)
   - `review`: 1.6x (explicit feedback)
   - `add_to_cart`: 1.5x (strong intent)
   - `wishlist`: 1.3x (interest)
   - `click`: 1.2x (engagement)
   - `view`: 1.0x (base)

4. **Flexible Schema**: The `event_type` column is a `String` type, so you can add custom event types if needed, but it's recommended to stick with the standard types listed above.

